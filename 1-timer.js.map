{"version":3,"file":"1-timer.js","sources":["../src/js/1-timer.js"],"sourcesContent":["import flatpickr from 'flatpickr';\nimport 'flatpickr/dist/flatpickr.min.css';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst refs = {\n  input: document.querySelector('#datetime-picker'),\n  button: document.querySelector('[data-start]'),\n  day: document.querySelector('[data-days]'),\n  hours: document.querySelector('[data-hours]'),\n  minutes: document.querySelector('[data-minutes]'),\n  seconds: document.querySelector('[data-seconds]'),\n};\n\nconst currentDate = new Date().getTime();\n\nrefs.button.disabled = true;\nconst options = {\n  enableTime: true,\n  time_24hr: true,\n  defaultDate: new Date(),\n  minuteIncrement: 1,\n  onClose(selectedDates) {\n    console.log(selectedDates[0]);\n\n    const selectDate = selectedDates[0];\n    if (selectDate - currentDate < 0) {\n      iziToast.error({\n        position: 'topRight',\n        message: 'Please choose a date in the future',\n      });\n    } else {\n      refs.button.disabled = false;\n      refs.input.disabled = true;\n      refs.button.addEventListener('click', handlerClick);\n    }\n  },\n};\n\nfunction handlerClick() {\n  iziToast.success({\n    position: 'topRight',\n    message: 'Timer is running!',\n  });\n  refs.button.disabled = true;\n  let selectDate = new Date(refs.input.value).getTime();\n  let ms = Math.floor((selectDate - currentDate) / 1000) * 1000;\n  updformatTime(ms);\n  let id = setInterval(() => {\n    ms -= 1000;\n    console.log(ms);\n\n    if (ms <= 0) {\n      clearInterval(id);\n      iziToast.success({\n        position: 'topRight',\n        message: 'Timer is end!',\n      });\n    }\n    updformatTime(ms);\n  }, 1000);\n}\nfunction formatTime(value) {\n  return value.toString().padStart(2, '0');\n}\n\nfunction updformatTime(ms) {\n  refs.day.textContent = formatTime(convertMs(ms).days);\n  refs.hours.textContent = formatTime(convertMs(ms).hours);\n  refs.minutes.textContent = formatTime(convertMs(ms).minutes);\n  refs.seconds.textContent = formatTime(convertMs(ms).seconds);\n}\n\nflatpickr(refs.input, options);\n\nfunction convertMs(ms) {\n  const second = 1000;\n  const minute = second * 60;\n  const hour = minute * 60;\n  const day = hour * 24;\n\n  const days = Math.floor(ms / day);\n\n  const hours = Math.floor((ms % day) / hour);\n\n  const minutes = Math.floor(((ms % day) % hour) / minute);\n\n  const seconds = Math.floor((((ms % day) % hour) % minute) / second);\n\n  return { days, hours, minutes, seconds };\n}\n"],"names":["refs","currentDate","options","selectedDates","iziToast","handlerClick","selectDate","ms","updformatTime","id","formatTime","value","convertMs","flatpickr","days","hours","minutes","seconds"],"mappings":"2GAKA,MAAMA,EAAO,CACX,MAAO,SAAS,cAAc,kBAAkB,EAChD,OAAQ,SAAS,cAAc,cAAc,EAC7C,IAAK,SAAS,cAAc,aAAa,EACzC,MAAO,SAAS,cAAc,cAAc,EAC5C,QAAS,SAAS,cAAc,gBAAgB,EAChD,QAAS,SAAS,cAAc,gBAAgB,CAClD,EAEMC,EAAc,IAAI,OAAO,UAE/BD,EAAK,OAAO,SAAW,GACvB,MAAME,EAAU,CACd,WAAY,GACZ,UAAW,GACX,YAAa,IAAI,KACjB,gBAAiB,EACjB,QAAQC,EAAe,CACrB,QAAQ,IAAIA,EAAc,CAAC,CAAC,EAETA,EAAc,CAAC,EACjBF,EAAc,EAC7BG,EAAS,MAAM,CACb,SAAU,WACV,QAAS,oCACjB,CAAO,GAEDJ,EAAK,OAAO,SAAW,GACvBA,EAAK,MAAM,SAAW,GACtBA,EAAK,OAAO,iBAAiB,QAASK,CAAY,EAErD,CACH,EAEA,SAASA,GAAe,CACtBD,EAAS,QAAQ,CACf,SAAU,WACV,QAAS,mBACb,CAAG,EACDJ,EAAK,OAAO,SAAW,GACvB,IAAIM,EAAa,IAAI,KAAKN,EAAK,MAAM,KAAK,EAAE,UACxCO,EAAK,KAAK,OAAOD,EAAaL,GAAe,GAAI,EAAI,IACzDO,EAAcD,CAAE,EAChB,IAAIE,EAAK,YAAY,IAAM,CACzBF,GAAM,IACN,QAAQ,IAAIA,CAAE,EAEVA,GAAM,IACR,cAAcE,CAAE,EAChBL,EAAS,QAAQ,CACf,SAAU,WACV,QAAS,eACjB,CAAO,GAEHI,EAAcD,CAAE,CACjB,EAAE,GAAI,CACT,CACA,SAASG,EAAWC,EAAO,CACzB,OAAOA,EAAM,SAAU,EAAC,SAAS,EAAG,GAAG,CACzC,CAEA,SAASH,EAAcD,EAAI,CACzBP,EAAK,IAAI,YAAcU,EAAWE,EAAUL,CAAE,EAAE,IAAI,EACpDP,EAAK,MAAM,YAAcU,EAAWE,EAAUL,CAAE,EAAE,KAAK,EACvDP,EAAK,QAAQ,YAAcU,EAAWE,EAAUL,CAAE,EAAE,OAAO,EAC3DP,EAAK,QAAQ,YAAcU,EAAWE,EAAUL,CAAE,EAAE,OAAO,CAC7D,CAEAM,EAAUb,EAAK,MAAOE,CAAO,EAE7B,SAASU,EAAUL,EAAI,CAMrB,MAAMO,EAAO,KAAK,MAAMP,EAAK,KAAG,EAE1BQ,EAAQ,KAAK,MAAOR,EAAK,MAAO,IAAI,EAEpCS,EAAU,KAAK,MAAQT,EAAK,MAAO,KAAQ,GAAM,EAEjDU,EAAU,KAAK,MAASV,EAAK,MAAO,KAAQ,IAAU,GAAM,EAElE,MAAO,CAAE,KAAAO,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,CACxC"}